(this["webpackJsonpcom.jtworks.chrome-ext.alltabs"]=this["webpackJsonpcom.jtworks.chrome-ext.alltabs"]||[]).push([[67],{155:function(e,i,n){"use strict";n.r(i),n.d(i,"ion_virtual_scroll",(function(){return m}));var o=n(14),s=n(35),l=n(22),a="item",c="header",u="footer",d=function createNode(e,i){var n=p(e,i);return n&&null!==e.ownerDocument?e.ownerDocument.importNode(n.content,!0).children[0]:null},p=function getTemplate(e,i){switch(i){case a:return e.querySelector("template:not([name])");case c:return e.querySelector("template[name=header]");case u:return e.querySelector("template[name=footer]")}},g=function calcCells(e,i,n,o,s,l,d,p,g,m,v,b){for(var y=[],x=b+v,H=v;H<x;H++){var w,S=e[H];if(s)null!=(w=s(S,H,e))&&y.push({i:m++,type:c,value:w,index:H,height:n?n(w,H):d,reads:n?0:2,visible:!!n});if(y.push({i:m++,type:a,value:S,index:H,height:i?i(S,H):g,reads:i?0:2,visible:!!i}),l)null!=(w=l(S,H,e))&&y.push({i:m++,type:u,value:w,index:H,height:o?o(w,H):p,reads:o?0:2,visible:!!o})}return y},m=function(){function t(e){var i=this;Object(s.r)(this,e),this.range={offset:0,length:0},this.viewportHeight=0,this.cells=[],this.virtualDom=[],this.isEnabled=!1,this.viewportOffset=0,this.currentScrollTop=0,this.indexDirty=0,this.lastItemLen=0,this.totalHeight=0,this.approxItemHeight=45,this.approxHeaderHeight=30,this.approxFooterHeight=30,this.onScroll=function(){i.updateVirtualScroll()}}return t.prototype.itemsChanged=function(){this.calcCells(),this.updateVirtualScroll()},t.prototype.componentWillLoad=function(){console.warn("[Deprecation Warning]: ion-virtual-scroll has been deprecated and will be removed in Ionic Framework v7.0. See https://ionicframework.com/docs/angular/virtual-scroll for migration steps.")},t.prototype.connectedCallback=function(){return Object(o.a)(this,void 0,void 0,(function(){var e,i;return Object(o.c)(this,(function(n){switch(n.label){case 0:return(e=this.el.closest("ion-content"))?(i=this,[4,e.getScrollElement()]):(console.error("<ion-virtual-scroll> must be used inside an <ion-content>"),[2]);case 1:return i.scrollEl=n.sent(),this.contentEl=e,this.calcCells(),this.updateState(),[2]}}))}))},t.prototype.componentDidUpdate=function(){this.updateState()},t.prototype.disconnectedCallback=function(){this.scrollEl=void 0},t.prototype.onResize=function(){this.calcCells(),this.updateVirtualScroll()},t.prototype.positionForItem=function(e){return Promise.resolve(function positionForIndex(e,i,n){var o=i.find((function(i){return i.type===a&&i.index===e}));return o?n[o.i]:-1}(e,this.cells,this.getHeightIndex()))},t.prototype.checkRange=function(e,i){return void 0===i&&(i=-1),Object(o.a)(this,void 0,void 0,(function(){var n,s,l;return Object(o.c)(this,(function(o){return this.items?(n=-1===i?this.items.length-e:i,s=function findCellIndex(e,i){var n=e.length>0?e[e.length-1].index:0;return 0===i?0:i===n+1?e.length:e.findIndex((function(e){return e.index===i}))}(this.cells,e),l=g(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,s,e,n),this.cells=function inplaceUpdate(e,i,n){if(0===n&&i.length>=e.length)return i;for(var o=0;o<i.length;o++)e[o+n]=i[o];return e}(this.cells,l,s),this.lastItemLen=this.items.length,this.indexDirty=Math.max(e-1,0),this.scheduleUpdate(),[2]):[2]}))}))},t.prototype.checkEnd=function(){return Object(o.a)(this,void 0,void 0,(function(){return Object(o.c)(this,(function(e){return this.items&&this.checkRange(this.lastItemLen),[2]}))}))},t.prototype.updateVirtualScroll=function(){this.isEnabled&&this.scrollEl&&(this.timerUpdate&&(clearTimeout(this.timerUpdate),this.timerUpdate=void 0),Object(s.f)(this.readVS.bind(this)),Object(s.c)(this.writeVS.bind(this)))},t.prototype.readVS=function(){for(var e=this,i=e.contentEl,n=e.scrollEl,o=0,s=e.el;null!==s&&s!==i;)o+=s.offsetTop,s=s.offsetParent;this.viewportOffset=o,n&&(this.viewportHeight=n.offsetHeight,this.currentScrollTop=n.scrollTop)},t.prototype.writeVS=function(){var e=this.indexDirty,i=function getViewport(e,i,n){return{top:Math.max(e-n,0),bottom:e+i+n}}(this.currentScrollTop-this.viewportOffset,this.viewportHeight,100),n=this.getHeightIndex(),o=function getRange(e,i,n){for(var o=i.top,s=i.bottom,l=0;l<e.length&&!(e[l]>o);l++);for(var a=Math.max(l-n-1,0);l<e.length&&!(e[l]>=s);l++);return{offset:a,length:Math.min(l+n,e.length)-a}}(n,i,2),l=function getShouldUpdate(e,i,n){return e<=n.offset+n.length||i.offset!==n.offset||i.length!==n.length}(e,this.range,o);l&&(this.range=o,function updateVDom(e,i,n,o){for(var s=0,l=e;s<l.length;s++){var a=l[s];a.change=0,a.d=!0}for(var c=[],u=o.offset+o.length,d=function h(o){var s=n[o],l=e.find((function(e){return e.d&&e.cell===s}));if(l){var a=i[o];a!==l.top&&(l.top=a,l.change=1),l.d=!1}else c.push(s)},p=o.offset;p<u;p++)d(p);for(var g=e.filter((function(e){return e.d})),m=function f(n){var o=g.find((function(e){return e.d&&e.cell.type===n.type})),s=n.i;o?(o.d=!1,o.change=2,o.cell=n,o.top=i[s]):e.push({d:!1,cell:n,visible:!0,change:2,top:i[s]})},v=0,b=c;v<b.length;v++)m(b[v]);e.filter((function(e){return e.d&&-9999!==e.top})).forEach((function(e){e.change=1,e.top=-9999}))}(this.virtualDom,n,this.cells,o),this.nodeRender?function doRender(e,i,n,o){for(var s,l,a=Array.from(e.children).filter((function(e){return"TEMPLATE"!==e.tagName})),c=a.length,u=0;u<n.length;u++){var p=n[u],g=p.cell;if(2===p.change){if(u<c)i(l=a[u],g,u);else{var m=d(e,g.type);(l=null!==(s=i(m,g,u))&&void 0!==s?s:m).classList.add("virtual-item"),e.appendChild(l)}l.$ionCell=g}else l=a[u];0!==p.change&&(l.style.transform="translate3d(0,".concat(p.top,"px,0)"));var v=g.visible;p.visible!==v&&(v?l.classList.remove("virtual-loading"):l.classList.add("virtual-loading"),p.visible=v),g.reads>0&&(o(g,l),g.reads--)}}(this.el,this.nodeRender,this.virtualDom,this.updateCellHeight.bind(this)):this.domRender?this.domRender(this.virtualDom):this.renderItem&&Object(s.j)(this))},t.prototype.updateCellHeight=function(e,i){var n=this,o=function r(){if(i.$ionCell===e){var r=window.getComputedStyle(i),o=i.offsetHeight+parseFloat(r.getPropertyValue("margin-bottom"));n.setCellHeight(e,o)}};i?Object(l.c)(i,o):o()},t.prototype.setCellHeight=function(e,i){var n=e.i;e===this.cells[n]&&(e.height===i&&!0===e.visible||(e.visible=!0,e.height=i,this.indexDirty=Math.min(this.indexDirty,n),this.scheduleUpdate()))},t.prototype.scheduleUpdate=function(){var e=this;clearTimeout(this.timerUpdate),this.timerUpdate=setTimeout((function(){return e.updateVirtualScroll()}),100)},t.prototype.updateState=function(){var e=!!(this.scrollEl&&this.cells.length>0);e!==this.isEnabled&&(this.enableScrollEvents(e),e&&this.updateVirtualScroll())},t.prototype.calcCells=function(){this.items&&(this.lastItemLen=this.items.length,this.cells=g(this.items,this.itemHeight,this.headerHeight,this.footerHeight,this.headerFn,this.footerFn,this.approxHeaderHeight,this.approxFooterHeight,this.approxItemHeight,0,0,this.lastItemLen),this.indexDirty=0)},t.prototype.getHeightIndex=function(){return this.indexDirty!==1/0&&this.calcHeightIndex(this.indexDirty),this.heightIndex},t.prototype.calcHeightIndex=function(e){void 0===e&&(e=0),this.heightIndex=function resizeBuffer(e,i){if(!e)return new Uint32Array(i);if(e.length===i)return e;if(i>e.length){var n=new Uint32Array(i);return n.set(e),n}return e.subarray(0,i)}(this.heightIndex,this.cells.length),this.totalHeight=function calcHeightIndex(e,i,n){for(var o=e[n],s=n;s<e.length;s++)e[s]=o,o+=i[s].height;return o}(this.heightIndex,this.cells,e),this.indexDirty=1/0},t.prototype.enableScrollEvents=function(e){var i=this;this.rmEvent&&(this.rmEvent(),this.rmEvent=void 0);var n=this.scrollEl;n&&(this.isEnabled=e,n.addEventListener("scroll",this.onScroll),this.rmEvent=function(){n.removeEventListener("scroll",i.onScroll)})},t.prototype.renderVirtualNode=function(e){var i=e.cell,n=i.type,o=i.value,s=i.index;switch(n){case a:return this.renderItem(o,s);case c:return this.renderHeader(o,s);case u:return this.renderFooter(o,s)}},t.prototype.render=function(){var e=this;return Object(s.h)(s.H,{style:{height:"".concat(this.totalHeight,"px")}},this.renderItem&&Object(s.h)(v,{dom:this.virtualDom},this.virtualDom.map((function(i){return e.renderVirtualNode(i)}))))},Object.defineProperty(t.prototype,"el",{get:function get(){return Object(s.i)(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"watchers",{get:function get(){return{itemHeight:["itemsChanged"],headerHeight:["itemsChanged"],footerHeight:["itemsChanged"],items:["itemsChanged"]}},enumerable:!1,configurable:!0}),t}(),v=function VirtualProxy(e,i,n){var o=e.dom;return n.map(i,(function(e,i){var n=o[i],s=e.vattrs||{},l=s.class||"";return l+="virtual-item ",n.visible||(l+="virtual-loading"),Object.assign(Object.assign({},e),{vattrs:Object.assign(Object.assign({},s),{class:l,style:Object.assign(Object.assign({},s.style),{transform:"translate3d(0,".concat(n.top,"px,0)")})})})}))};m.style="ion-virtual-scroll{display:block;position:relative;width:100%;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}ion-virtual-scroll>.virtual-loading{opacity:0}ion-virtual-scroll>.virtual-item{position:absolute !important;top:0 !important;right:0 !important;left:0 !important;-webkit-transition-duration:0ms;transition-duration:0ms;will-change:transform}"}}]);